(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{225:function(t,e,n){"use strict";n.r(e);var a=n(0),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"vue数据响应式的实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue数据响应式的实现"}},[t._v("#")]),t._v(" vue数据响应式的实现")]),t._v(" "),n("blockquote",[n("blockquote",[n("p",[t._v("涉及的知识点defineProperty\n简介：Object.defineProperty()直接在对象上定义新属性，或修改对象上的现有属性，然后返回对象。")])])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("用法：\nObject.defineProperty(obj, prop, descriptor)\nobj ： 要在其上定义属性的对象。\nprop ： Symbol要定义或修改的属性的名称或名称。\ndescriptor ： 定义或修改的属性的描述符。\n\n")])])]),n("p",[t._v("描述符又分为：数据描述符和访问器描述符。")]),t._v(" "),n("p",[t._v("数据和访问描述符都是对象。它们共享以下可选键（在使用Object.defineProperty（）定义属性的情况下，默认值为）：")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("configurable ：默认为false。\ntrue当且仅当此属性描述符的类型可以更改，并且该属性可以从相应的对象中删除时。")])]),t._v(" "),n("li",[n("p",[t._v("enumerable ：  默认为false。\ntrue当且仅当在枚举相应对象的属性时显示此属性。")])])]),t._v(" "),n("p",[t._v("数据描述符还具有以下可选键：")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("value ： 默认为undefined\n与属性关联的值。可以是任何有效的JavaScript值（数字，对象，函数等）。")])]),t._v(" "),n("li",[n("p",[t._v("writable ： 默认为false。\ntrue当且仅当与属性关联的值可以使用赋值运算符更改时。")])])]),t._v(" "),n("p",[t._v("访问器描述符：")]),t._v(" "),n("ol",[n("li",[t._v("get ： 默认为undefined。\n一个给属性提供getter的方法，如果没有getter则为undefined。该方法返回值被用作属性值。默认为undefined。")]),t._v(" "),n("li",[t._v("set ：默认为undefined\n一个给属性提供setter的方法，如果没有setter则为undefined。该方法将接受唯一参数，并将该参数的新值分配给该属性。")])]),t._v(" "),n("p",[t._v("简单一点就是：")]),t._v(" "),n("ol",[n("li",[t._v("简单点就是 设置属性的值value，")]),t._v(" "),n("li",[t._v("是否可操作属性值 writable，")]),t._v(" "),n("li",[t._v("是否可修改配置configurable如果值为false descriptor内的属性都不可操作）")]),t._v(" "),n("li",[t._v("是否可枚举enumerable")]),t._v(" "),n("li",[t._v("get访问触发，返回值作为访问的值")]),t._v(" "),n("li",[t._v("set修改时触发，该方法将接受唯一参数，并将该参数的新值分配给该属性")])]),t._v(" "),n("blockquote",[n("blockquote",[n("p",[t._v("接下来我们撸代码，用于去理解")])])]),t._v(" "),n("h2",{attrs:{id:"第一步我们做数据劫持"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步我们做数据劫持"}},[t._v("#")]),t._v(" 第一步我们做数据劫持")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("THML:\n<script src='VUEs.js' type=\"text/javascript\" charset=\"utf-8\"><\/script>\n<script type=\"text/javascript\" '>\n\tlet vues = new Vue({\n\t\tdata:{\n\t\t   name:'我是未更新前的值',\n\t\t   obj : {\n\t\t\t   age : 18\n\t\t   }\t\t\t\t   \n\t\t}\n\t})\n\tvues.$data.name = '我是更新的新值'\n\tvues.$data.obj.age = '19'\n\tconsole.log(vues.$data.name)   //'我是更新的新值'\n\tconsole.log(vues.$data.obj.age)  //19\n<\/script>\n\nVUEs.js\n\nclass Vue{    //创建一个VUE类\n\tconstructor(option) {\n\t\n\t\tthis.$data = option.data;\t\t\n\t\tthis.obsere(this.$data) \n\t}\n\tobsere(ObjData){    //数据响应化，装逼的词语叫做数据劫持\n\t\tif(!ObjData || typeof(ObjData) !== 'object'){return}\n\t\t\n\t\tObject.keys(ObjData).forEach((key)=>{  //去监听绑定每一个属性\n\t\t\tthis.defindReactive( ObjData , key , ObjData[key] )\n\t\t})\n\t}\n\tdefindReactive( ObjData , key ,oldval){   //进行属性的监听和赋值 \n\t\tthis.obsere(oldval); //这里做递归,用来进行深层次的赋值\n\t\n\t\tObject.defineProperty(ObjData , key ,{\n\t\t\tget(){\n\t\t\t\treturn oldval\n\t\t\t},\n\t\t\tset(newVal){\n\t\t\t\tif(newVal === oldval){return}\n\t\t\t\toldval = newVal;    //用于赋值给get返回\n\t\t\t\tconsole.log(`更新了值: ${newVal}`)\t\t\t\t\n\t\t\t}\n\t\t})\n\t\t\n\t\t\n\t}\n}\n\n")])])]),n("h2",{attrs:{id:"利用的发布订阅模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#利用的发布订阅模式"}},[t._v("#")]),t._v(" 利用的发布订阅模式")]),t._v(" "),n("p",[t._v("首先我们需要明白一个事情vue的数据绑定的原理，我大概的理解是："),n("br"),t._v("\n利用了definpropoty 数据劫持，每个属性定义了get ,set方法，去监听属性的变化，当属性变化时，"),n("strong",[t._v("通知")]),t._v("那些需要更新的地方去更新")]),t._v(" "),n("blockquote",[n("p",[t._v("这里我们看一张图：   (从一个视频里面截图过来的，具体啥课不记得了，一个公开课，只是保存了一下，做了笔记)")])]),t._v(" "),n("p",[n("img",{attrs:{src:"http://file.liyao1994.top/vueDefinpropoty.png",alt:"Alt text"}})]),t._v(" "),n("p",[t._v("从数据劫持中，我们能够猜到发布者肯定是在 set方法中，去通知数据进行更新，那么我们需要做的就是去添加订阅者，或者是观察者。"),n("br"),t._v("\n首先上代码：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("慢慢迁移，敬请期待\n\n")])])]),n("p",[t._v("慢慢迁移，敬请期待")])])}),[],!1,null,null,null);e.default=s.exports}}]);